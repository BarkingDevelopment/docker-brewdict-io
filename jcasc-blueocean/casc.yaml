credentials:
  system:
    domainCredentials:
    - credentials:
      - x509ClientCert:
          clientCertificate: ${readFile:${DOCKER_CERT_PATH}/cert.pem}
          clientKeySecret: ${readFile:${DOCKER_CERT_PATH}/key.pem}
          id: "comp3000-docker-dind"
          scope: GLOBAL
          serverCaCertificate: ${readFile:${DOCKER_CERT_PATH}/ca.pem}

jenkins:
  systemMessage: "This is a work in progress CasC file for COMP3000 Jenkins server."
  
  securityRealm:
    local:
      allowsSignup: false
      users:
       - id: ${JENKINS_ADMIN_ID}
         password: ${JENKINS_ADMIN_PASSWORD}
  authorizationStrategy:
    globalMatrix:
      permissions:
        - "Overall/Administer:admin"
        - "Overall/Read:authenticated"
        
  numExecutors: 0
  slaveAgentPort: 50000
  clouds:
  - docker:
      dockerApi:
        dockerHost:
          credentialsId: "comp3000-docker-dind"
          uri: "tcp://docker:2376"
      name: "docker"
      templates:
      - connector: "attach"
        disabled:
          enabledByChoice: true
        dockerTemplateBase:
          image: "jenkins/agent:latest"
        labelString: "jenkins-agent"
        name: "jenkins-cloud-agent-01"

  remotingSecurity:
    enabled: true

tool:
  git:
    installations:
      - name: git
        home: /user/local/bin/git

security:
  queueItemAuthenticator:
    authenticators:
    - global:
        strategy: triggeringUsersAuthorizationStrategy

unclassified:
  location:
    # TODO Migrate to jenkins.brewdict.io.
    adminAddress: "max.barker@students.plymouth.ac.uk"
    url: "http://brewdict.maxbarker.uk:8080/"

